Этот тест показывает, что если один из компонентов
(например, HistoryService) выходит из строя, то вся
операция в CalculatorWithHistory завершается с ошибкой.
Это может быть критично для пользовательского опыта,
если система не обрабатывает такие исключения корректно.
В реальных системах важно предусмотреть механизмы обработки ошибок,
чтобы отказ одного сервиса не приводил к полной недоступности функциональности
(например, можно использовать кеширование, асинхронную запись или фолбэк-логику).